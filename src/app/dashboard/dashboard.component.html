<mat-toolbar class="mat-elevation-z8">
    <div>
        <button
        mat-icon-button
        *ngIf="sidenav.mode === 'over'"
        (click)="sidenav.toggle()"
        >
        <mat-icon *ngIf="!sidenav.opened"> menu </mat-icon>
        <mat-icon *ngIf="sidenav.opened"> close </mat-icon>
        </button>
    </div>
  </mat-toolbar>
  
  <mat-sidenav-container>
    <mat-sidenav #sidenav="matSidenav" class="mat-elevation-z8">
      <img
        class="avatar mat-elevation-z8"
        src="https://avatars.githubusercontent.com/u/80176086?s=400&u=a70f8996b1f9377fa62a06ebc6e7efc13bfb7ffd&v=4"
      />
  
      <h4 class="name text-white">{{usuario.nombre}} {{usuario.apellido1}}</h4>
      <h5 class="name text-white">{{usuario.rol}}</h5>
  
      <mat-divider></mat-divider>

      <button *ngIf="usuario.rol == 'Coordinador'" mat-button [matMenuTriggerFor]="personas">Gestión Personas</button>
      <mat-menu #personas="matMenu">
        <button mat-menu-item [routerLink]="['/usuarios-form']" [queryParams]="{rol: 'Coordinador'}">Crear coordinador</button>
        <button mat-menu-item [routerLink]="['/usuarios-form']" [queryParams]="{rol: 'Monitor'}">Crear monitor</button>
        <button mat-menu-item [routerLink]="['/usuarios-form']" [queryParams]="{rol: 'Usuario'}">Crear usuario</button>
      </mat-menu>

      <button *ngIf="usuario.rol == 'Monitor'" mat-button [matMenuTriggerFor]="sesiones">Mis sesiones</button>
      <mat-menu #sesiones="matMenu">
        <button mat-menu-item [routerLink]="['']">Ver mis sesiones</button>
        <button mat-menu-item [routerLink]="['']">Programar una sesión</button>
      </mat-menu>

      <button *ngIf="usuario.rol == 'Usuario'" mat-button [matMenuTriggerFor]="pagos">Gestión de pagos</button>
      <mat-menu #pagos="matMenu">
        <button mat-menu-item [routerLink]="['']">Ver mis pagos</button>
        <button mat-menu-item [routerLink]="['']">Realizar un pago</button>
      </mat-menu>

      <button *ngIf="usuario.rol == 'Coordinador'" mat-button [matMenuTriggerFor]="group">Gestión Grupos</button>
      <mat-menu #group="matMenu">
        <button mat-menu-item [routerLink]="['/grupos-form']">Crear grupo</button>
        <button mat-menu-item [routerLink]="['/usuarios-form']">Modificar grupo</button>
      </mat-menu>


      <button *ngIf="usuario.rol == 'Coordinador'" mat-button [matMenuTriggerFor]="competiciones">Gestión Competiciones</button>
      <mat-menu #competiciones="matMenu">
        <button mat-menu-item [routerLink]="['/torneos-form']" [queryParams]="{tipo: 'Torneo', userID: id}">Crear Torneo</button>
        <button mat-menu-item [routerLink]="['/torneos-form']" [queryParams]="{tipo: 'Ranking', userID: id}">Crear Ranking</button>
      </mat-menu>

      <button *ngIf="usuario.rol == 'Coordinador'" mat-button [matMenuTriggerFor]="espacios">Gestión Espacios</button>
      <mat-menu #espacios="matMenu">
        <button mat-menu-item [routerLink]="['/pistas-tenis']">Tenis</button>
        <button mat-menu-item [routerLink]="['/pistas-padel']">Pádel</button>
      </mat-menu>

      <mat-divider></mat-divider>

      <button *ngIf="usuario.rol == 'Coordinador'" mat-button [matMenuTriggerFor]="reservas">Reserva de pistas</button>
      <mat-menu #reservas="matMenu">
        <button mat-menu-item [routerLink]="['/reservas-form']" [queryParams]="{deporte: 'Tenis'}">Nueva reserva de Tenis</button>
        <button mat-menu-item [routerLink]="['/reservas-form']" [queryParams]="{deporte: 'Padel'}">Nueva reserva de Pádel</button>
      </mat-menu>

      <button *ngIf="usuario.rol == 'Monitor'" mat-button [matMenuTriggerFor]="horas">Gestión de horas</button>
      <mat-menu #horas="matMenu">
        <button mat-menu-item [routerLink]="['/pistas-tenis-form']">Mis horas trabajadas</button>
        <button mat-menu-item [routerLink]="['/pistas-tenis-form']">Imputar nueva hora</button>
      </mat-menu>
      
      <button *ngIf="usuario.rol == 'Usuario'" mat-button [matMenuTriggerFor]="alquileres">Alquileres</button>
      <mat-menu #alquileres="matMenu">
        <button mat-menu-item [routerLink]="['/reservas-form']" [queryParams]="{deporte: 'Tenis'}">Nueva reserva de Tenis</button>
        <button mat-menu-item [routerLink]="['/reservas-form']" [queryParams]="{deporte: 'Padel'}">Nueva reserva de Pádel</button>
      </mat-menu>

      <mat-divider  *ngIf="usuario.rol == 'Usuario'"></mat-divider>

    </mat-sidenav>
    <mat-sidenav-content>
      <div class="content mat-elevation-z8">
        <div class="container-fluid px-4">
            <h1 class="mt-4" >Panel de {{usuario.rol}}</h1>

            <div *ngIf="usuario.rol == 'Coordinador'" class="card mb-4">
                <div class="card-header bg-madset text-white">
                    <img src="../../assets/icons/users.png" alt="">
                    Gestión de usuarios
                </div>
                <div class="card-body">
                    <app-usuario [usuarios]= "usuarios"></app-usuario>
                </div>
            </div>

            <div *ngIf="usuario.rol == 'Coordinador'" class="card mb-4">
                <div class="card-header bg-madset text-white">
                    <img src="../../assets/icons/calendar1.png" alt="">
                    Situación ocupación pistas hoy
                </div>
                <div class="card-body">
                    <app-reserva [reservas] = "resToday"></app-reserva>
                </div>
            </div>
            <div *ngIf="usuario.rol == 'Coordinador'" class="row">
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <img src="../../assets/icons/trophy-light.png" alt="">
                            Gestión torneos
                        </div>
                        <div class="card-body">
                            <app-torneo [competiciones] = "torneos" [usuario] = "usuario"></app-torneo>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <img src="../../assets/icons/medal.png" alt="">
                            Gestión de rankings
                        </div>
                        <div class="card-body">
                            <app-torneo [competiciones] = "rankings" [usuario] = "usuario"></app-torneo>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="usuario.rol == 'Coordinador'" class="row">
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <img src="../../assets/icons/medal.png" alt="">
                            Visor de grupos de la escuela
                        </div>
                        <div class="card-body">
                            <app-grupo [grupos]= "grupos" [usuario] = "usuario"></app-grupo>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <img src="../../assets/icons/team.png" alt="">
                            Visor de monitores de la escuela
                        </div>
                        <div class="card-body">
                            <app-usuario [usuarios]= "monitores"></app-usuario>
                        </div>
                    </div>
                </div>
            </div>   
            <div *ngIf="usuario.rol == 'Monitor'" class="card mb-4">
                <div class="card-header bg-madset text-white">
                    Mi agenda semanal
                </div>
                <div class="card-body">
                    <!--Incluir selector de los grupos para un monitor -->
                </div>
            </div>
            <div *ngIf="usuario.rol == 'Monitor'" class="row">
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <img src="../../assets/icons/users.png" alt="">
                            Mis grupos
                        </div>
                        <div class="card-body">
                            <app-grupo [grupos]= "gruposMonitor" [usuario] = "usuario"></app-grupo>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <i class="fas fa-id-card me-1"></i>
                            Control de asistencia
                        </div>
                        <div class="card-body"><canvas id="myBarChart" width="100%" height="40"></canvas></div>
                    </div>
                </div>
            </div>      
            <div *ngIf="usuario.rol == 'Usuario'" class="row">
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <i class="fas fa-users me-1"></i>
                            Visor de estado de cuotas
                        </div>
                        <div class="card-body"><canvas id="myAreaChart" width="100%" height="40"></canvas></div>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <img src="../../assets/icons/users.png" alt="">
                            Visor de mis grupos
                        </div>
                        <div class="card-body">
                            <app-grupo [grupos]= "gruposUsuario" [usuario] = "usuario"></app-grupo>
                        </div>
                    </div>
                </div>
            </div> 
            <div *ngIf="usuario.rol == 'Usuario'" class="row">
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <i class="fas fa-users me-1"></i>
                            Mis Torneos
                        </div>
                        <div class="card-body">
                            <app-torneo [competiciones]= "userTorneos" [usuario] = "usuario"></app-torneo>
                        </div>
                    </div>
                </div>
                <div class="col-xl-6">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <i class="fas fa-id-card me-1"></i>
                            Mis Rankings
                        </div>
                        <div class="card-body">
                            <app-torneo [competiciones]= "userRankings"></app-torneo>
                        </div>
                    </div>
                </div>
            </div>
            <div *ngIf="usuario.rol == 'Usuario'" class="row">
                <div class="col-xl-12">
                    <div class="card mb-4">
                        <div class="card-header bg-madset text-white">
                            <i class="fas fa-id-card me-1"></i>
                            Inscripción a competiciones
                        </div>
                        <div class="card-body">
                            <app-torneo [competiciones]= "torneosInscripcion" [usuario] = "usuario" [inscripcionEnabled]="true"></app-torneo>
                        </div>
                    </div>
                </div>
            </div>    
        </div>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
